
<div class="min-h-screen bg-slate-900 text-slate-200 flex flex-col items-center p-4 sm:p-8 font-sans">
  <div class="w-full max-w-4xl mx-auto">
    <!-- Header -->
    <header class="text-center mb-8">
      <h1 class="text-4xl sm:text-5xl font-bold text-white mb-2">Typeform to SCORM Converter</h1>
      <p class="text-lg text-slate-400">Package any Typeform survey into a SCORM 1.2 file for your LMS.</p>
    </header>

    <!-- Main Content -->
    <main class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      
      <!-- Form Section -->
      <div class="bg-slate-800 p-6 sm:p-8 rounded-2xl shadow-2xl border border-slate-700">
        <h2 class="text-2xl font-semibold mb-6 text-white border-b border-slate-600 pb-4">Course Details</h2>
        <form (submit)="$event.preventDefault(); generateScormPackage()">
          <div class="space-y-6">
            
            <!-- Typeform URL -->
            <div>
              <label for="typeformUrl" class="block text-sm font-medium text-slate-300 mb-2">Typeform URL</label>
              <input id="typeformUrl" type="url" placeholder="https://yourname.typeform.com/to/..."
                     [value]="typeformUrl()"
                     (input)="typeformUrl.set($event.target.value)"
                     class="w-full bg-slate-700 border border-slate-600 rounded-md py-2 px-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-150">
            </div>

            <!-- Course Title -->
            <div>
              <label for="courseTitle" class="block text-sm font-medium text-slate-300 mb-2">Course Title</label>
              <input id="courseTitle" type="text" placeholder="e.g., Annual Compliance Training"
                     [value]="courseTitle()"
                     (input)="courseTitle.set($event.target.value)"
                     class="w-full bg-slate-700 border border-slate-600 rounded-md py-2 px-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-150">
            </div>

            <!-- Course Identifier -->
            <div>
              <label for="courseIdentifier" class="block text-sm font-medium text-slate-300 mb-2">Course Identifier</label>
              <input id="courseIdentifier" type="text" placeholder="e.g., com.company.compliance-training"
                     [value]="courseIdentifier()"
                     (input)="courseIdentifier.set($event.target.value); onIdentifierInput()"
                     pattern="[a-zA-Z0-9-._]+"
                     class="w-full bg-slate-700 border border-slate-600 rounded-md py-2 px-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-150">
              <p class="text-xs text-slate-500 mt-1">Unique ID. No spaces or special characters allowed.</p>
            </div>

            <!-- Course Description -->
            <div>
              <label for="courseDescription" class="block text-sm font-medium text-slate-300 mb-2">Course Description</label>
              <textarea id="courseDescription" rows="3" placeholder="A short description of the survey or course."
                        [value]="courseDescription()"
                        (input)="courseDescription.set($event.target.value)"
                        class="w-full bg-slate-700 border border-slate-600 rounded-md py-2 px-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-150"></textarea>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="mt-8">
            <button type="submit" [disabled]="!isFormValid() || isGenerating()"
                    class="w-full flex justify-center items-center gap-2 bg-cyan-600 hover:bg-cyan-500 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded-lg transition duration-300 shadow-lg shadow-cyan-900/50">
              @if(isGenerating()) {
                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span>Generating...</span>
              } @else {
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 7.414V17a1 1 0 001 1h10a1 1 0 001-1V7.414l-3.293 3.293a1 1 0 001.414-1.414l-7-7z" />
                  <path d="M6 18h8v-2H6v2z" />
                </svg>
                <span>Generate SCORM Package</span>
              }
            </button>
          </div>
        </form>
      </div>

      <!-- Instructions & Status Section -->
      <div class="bg-slate-800/50 p-6 sm:p-8 rounded-2xl flex flex-col justify-center">
        @if (!generatedPackageName()) {
          <h2 class="text-2xl font-semibold mb-4 text-white">How it Works</h2>
          <ol class="list-decimal list-inside space-y-3 text-slate-300">
            <li>Fill in all the details for your course on the left.</li>
            <li>Ensure your Typeform URL is correct and public.</li>
            <li>Click the "Generate" button.</li>
            <li>A <code class="bg-slate-700 text-cyan-400 p-1 rounded text-sm">.zip</code> file will be downloaded to your computer.</li>
            <li>Upload this zip file directly to your SCORM 1.2 compliant LMS.</li>
          </ol>
        } @else {
          <div class="text-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-green-400 mx-auto mb-4" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <h2 class="text-2xl font-semibold mb-2 text-white">Package Ready!</h2>
            <p class="text-slate-300 mb-4">Your SCORM package <code class="bg-slate-700 text-cyan-400 p-1 rounded text-sm">{{ generatedPackageName() }}</code> has been generated.</p>
            <p class="text-slate-400 mb-6 text-sm">If your download didn't start, you can generate it again.</p>
            <div class="bg-slate-900/50 p-4 rounded-lg">
                <h3 class="text-lg font-semibold mb-2 text-left text-slate-200">Files in Package:</h3>
                <ul class="text-sm text-slate-400 space-y-1 text-left">
                    <li><code class="font-mono">imsmanifest.xml</code></li>
                    <li><code class="font-mono">index.html</code></li>
                    <li><code class="font-mono">scorm.js</code></li>
                    <li><code class="font-mono">adlcp_rootv1p2.xsd</code></li>
                    <li><code class="font-mono">ims_xml.xsd</code></li>
                    <li><code class="font-mono">imscp_rootv1p1.xsd</code></li>
                    <li><code class="font-mono">imsmd_rootv1p2p1.xsd</code></li>
                </ul>
            </div>
          </div>
        }
      </div>
    </main>
  </div>
</div>
